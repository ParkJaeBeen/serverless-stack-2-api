{"ast":null,"code":"import \"source-map-support/register\";\nimport { calculateCost } from \"./libs/billing-lib\";\nimport stripePackage from \"stripe\";\nimport handler from \"./libs/handler-lib\";\nexport const main = handler(async (event, context) => {\n  const {\n    storage,\n    source\n  } = JSON.parse(event.body);\n  const amount = calculateCost(storage);\n  const description = \"Scratch charge\"; // Load our secret key from the  environment variables\n\n  const stripe = stripePackage(process.env.stripeSecretKey);\n  await stripe.charges.create({\n    source,\n    amount,\n    description,\n    currency: \"usd\"\n  });\n  return {\n    status: true\n  };\n});","map":{"version":3,"sources":["C:/Users/program_pc/serverless-stack-2-api/billing.js"],"names":["calculateCost","stripePackage","handler","main","event","context","storage","source","JSON","parse","body","amount","description","stripe","process","env","stripeSecretKey","charges","create","currency","status"],"mappings":";AAAA,SAASA,aAAT,QAA8B,oBAA9B;AACA,OAAOC,aAAP,MAA0B,QAA1B;AACA,OAAOC,OAAP,MAAoB,oBAApB;AAGA,OAAO,MAAMC,IAAI,GAAGD,OAAO,CAAC,OAAOE,KAAP,EAAcC,OAAd,KAA0B;AACpD,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAAsBC,IAAI,CAACC,KAAL,CAAWL,KAAK,CAACM,IAAjB,CAA5B;AACA,QAAMC,MAAM,GAAGX,aAAa,CAACM,OAAD,CAA5B;AACA,QAAMM,WAAW,GAAG,gBAApB,CAHoD,CAKpD;;AACA,QAAMC,MAAM,GAAGZ,aAAa,CAACa,OAAO,CAACC,GAAR,CAAYC,eAAb,CAA5B;AAEA,QAAMH,MAAM,CAACI,OAAP,CAAeC,MAAf,CAAsB;AAC1BX,IAAAA,MAD0B;AAE1BI,IAAAA,MAF0B;AAG1BC,IAAAA,WAH0B;AAI1BO,IAAAA,QAAQ,EAAE;AAJgB,GAAtB,CAAN;AAMA,SAAO;AAAEC,IAAAA,MAAM,EAAE;AAAV,GAAP;AACD,CAf0B,CAApB","sourcesContent":["import { calculateCost } from \"./libs/billing-lib\";\r\nimport stripePackage from \"stripe\";\r\nimport handler from \"./libs/handler-lib\";\r\n\r\n\r\nexport const main = handler(async (event, context) => {\r\n  const { storage, source } = JSON.parse(event.body);\r\n  const amount = calculateCost(storage);\r\n  const description = \"Scratch charge\";\r\n\r\n  // Load our secret key from the  environment variables\r\n  const stripe = stripePackage(process.env.stripeSecretKey);\r\n\r\n  await stripe.charges.create({\r\n    source,\r\n    amount,\r\n    description,\r\n    currency: \"usd\"\r\n  });\r\n  return { status: true };\r\n});"]},"metadata":{},"sourceType":"module"}